// =================================================================
// USER DASHBOARD STYLES (OPTIMIZED & FINAL)
// =================================================================

// --- 1. SHARED FOUNDATION ---
// Import variables, fonts, and theme settings from the shared file.
// This MUST come first.
@import '../shared/styles.scss';


// --- 2. BOOTSTRAP CORE LAYOUT & COMPONENTS ---

// --- 3. DASHBOARD-SPECIFIC LAYOUT STYLES ---
.dashboard-container {
  min-height: 100vh;
  // Prevents horizontal scroll on the main page
  overflow-x: hidden;
}

.sidebar {
  width: 280px;
  transition: transform 0.3s ease-in-out;

  // KEY FIX: This forcefully overrides Bootstrap's default transparent background
  // for the .offcanvas-lg component on desktop screens, ensuring it's always green.
  background-color: $primary !important;

  .nav-link {
    &.active, &:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
  }
}

.main-content {
  // This calculation ensures the main content area fills the remaining space
  // next to the fixed-width sidebar, solving layout issues on laptop screens.
  width: calc(100% - 280px);
  height: 100vh;
  overflow-y: auto; // Only the main content area should scroll
  background-color: $body-bg;

  // Mobile header styles
  .navbar {
    background-color: $primary;
    .navbar-brand { color: $white; }
    .navbar-toggler { border-color: rgba($white, 0.25); }
    .navbar-toggler-icon {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    }
  }

  // Desktop header styles
  .main-content-header {
    background-color: $primary;
    color: $white;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid rgba($black, 0.1);
    align-items: center;

    h1 {
      margin-bottom: 0;
      font-size: 1.25rem;
      font-weight: 600;
    }
  }

  // On smaller screens, the main content should take up the full width
  @media (max-width: 991.98px) {
    width: 100%;
  }
}


// --- 4. EXTRACTED COMPONENT STYLES ---

// Styles from payments.js
.student-payment-card {
  border-radius: .75rem;
  border: 1px solid var(--bs-border-color-translucent);
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  overflow: hidden;
  &:hover {
    transform: translateY(-5px);
    box-shadow: var(--bs-card-box-shadow);
  }
  .card-body { padding: 1rem; position: relative; }
  .student-avatar { font-size: 2.5rem; margin-right: 1rem; color: var(--bs-secondary-color); line-height: 1; }
  .student-info .card-title { font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
  .payment-status { text-align: center; font-weight: 500; padding: 0.5rem 0.75rem; border-top: 1px solid var(--bs-border-color-translucent); transition: background-color 0.2s ease; }
  &.has-dues { border-left: 4px solid var(--bs-danger); }
  &.has-dues .student-avatar { color: var(--bs-danger); }
  &.has-dues .payment-status { background-color: var(--bs-danger-bg-subtle); color: var(--bs-danger-text-emphasis); }
  &.paid-up { border-left: 4px solid var(--bs-success); }
  &.paid-up .payment-status { background-color: var(--bs-success-bg-subtle); color: var(--bs-success-text-emphasis); }
  .clear-student-records-btn { position: absolute; top: .5rem; right: .5rem; z-index: 5; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; opacity: 0.6; }
  &:hover .clear-student-records-btn { opacity: 1; }
  .clear-student-records-btn:hover { background-color: var(--bs-danger-bg-subtle); color: var(--bs-danger-text-emphasis); }
}

// Styles from files.js
.file-card {
  border: 1px solid var(--bs-border-color-translucent);
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  border-radius: .75rem;
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
  }
  .card-body { text-align: center; }
  .file-icon { font-size: 3rem; color: var(--bs-primary); }
  .card-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    height: 48px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    span { white-space: normal; }
  }
  .card-footer {
    background-color: var(--bs-tertiary-bg);
    border-top: 1px solid var(--bs-border-color-translucent);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
  }
}